<mat-expansion-panel class="mat-elevation-z0" *ngFor="let section of sections | keyvalue"
                     [(expanded)]="section.value.open" (afterExpand)="feedSection(section.key, section.value)">
  <mat-expansion-panel-header>
    <app-line>
      <h2>{{section.key}}</h2>
      <mat-spinner *ngIf="isSectionLoading[section.key]" diameter="25"></mat-spinner>
    </app-line>
  </mat-expansion-panel-header>
  <mat-card>
    <app-line justifyContent="flex-start">
      <ng-container *ngFor="let panel of section.value.panels | keyvalue">
        <div class="chart">
          <h3>{{panel.key}}</h3>
          <ngx-charts-line-chart *ngIf="panel.value.kind == 'LineChart'"
                                 [results]="getChartData(section.key, panel.key)"
                                 [gradient]="gradient"
                                 [xAxis]="showXAxis"
                                 [yAxis]="showYAxis"
                                 [legend]="panel.value.chart.show_legend"
                                 [showXAxisLabel]="showXAxisLabel"
                                 [showYAxisLabel]="showYAxisLabel"
                                 [xAxisLabel]="xAxisLabel"
                                 [yAxisLabel]="yAxisLabel">
          </ngx-charts-line-chart>
          <ngx-charts-gauge *ngIf="panel.value.kind == 'GaugeChart'"
                            [results]="getChartData(section.key, panel.key)"
                            [legend]="false"
                            [angleSpan]="240"
                            [startAngle]="-120"
                            [max]="100"
                            [bigSegments]="1"
                            [smallSegments]="5">
          </ngx-charts-gauge>
        </div>
      </ng-container>
    </app-line>
  </mat-card>
</mat-expansion-panel>
