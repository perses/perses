{
  "kind": "Dashboard",
  "metadata": {
    "name": "demo",
    "createdAt": "2025-07-13T11:12:32.618782Z",
    "updatedAt": "2025-07-22T14:55:43.164964Z",
    "version": 35,
    "project": "perses"
  },
  "spec": {
    "panels": {
      "basicEx": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "Single Query"
          },
          "plugin": {
            "kind": "TimeSeriesChart",
            "spec": {
              "legend": {
                "position": "right"
              },
              "yAxis": {
                "format": {
                  "unit": "decimal"
                }
              }
            }
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "query": "1 - node_filesystem_free_bytes{job='$job',instance=~'$instance',fstype!=\"rootfs\",mountpoint!~\"/(run|var).*\",mountpoint!=\"\"} / node_filesystem_size_bytes{job='$job',instance=~'$instance'}",
                    "seriesNameFormat": "Node memory - {{device}} {{instance}}"
                  }
                }
              }
            }
          ]
        }
      },
      "cpuGauge": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "CPU - Gauge (Multi Series)",
            "description": "This is a gauge chart test"
          },
          "plugin": {
            "kind": "GaugeChart",
            "spec": {
              "calculation": "last-number",
              "format": {
                "unit": "percent-decimal"
              },
              "thresholds": {
                "steps": [
                  {
                    "value": 0.2
                  },
                  {
                    "value": 0.35
                  }
                ]
              }
            }
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "query": "avg without (cpu)(rate(node_cpu_seconds_total{job='$job',instance=~'$instance',mode!=\"nice\",mode!=\"steal\",mode!=\"irq\"}[$interval]))",
                    "seriesNameFormat": "{{mode}} mode - {{job}} {{instance}}"
                  }
                }
              }
            }
          ]
        }
      },
      "cpuLine": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "CPU - Line (Multi Series)",
            "description": "This is a line chart test"
          },
          "plugin": {
            "kind": "TimeSeriesChart",
            "spec": {
              "legend": {
                "position": "bottom"
              },
              "thresholds": {
                "steps": [
                  {
                    "value": 0.2
                  },
                  {
                    "value": 0.35
                  }
                ]
              },
              "yAxis": {
                "format": {
                  "decimalPlaces": 0,
                  "unit": "percent-decimal"
                },
                "label": "CPU Label",
                "show": false
              }
            }
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "query": "avg without (cpu)(rate(node_cpu_seconds_total{job='$job',instance=~'$instance',mode!=\"nice\",mode!=\"steal\",mode!=\"irq\"}[$interval]))",
                    "seriesNameFormat": "{{mode}} mode - {{job}} {{instance}}"
                  }
                }
              }
            }
          ]
        }
      },
      "defaultTimeSeriesChart": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "Default Time Series Panel"
          },
          "plugin": {
            "kind": "TimeSeriesChart",
            "spec": {}
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "query": "up"
                  }
                }
              }
            }
          ]
        }
      },
      "gaugeAltEx": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "Gauge Alt Ex",
            "description": "GaugeChart description text"
          },
          "plugin": {
            "kind": "GaugeChart",
            "spec": {
              "calculation": "last-number",
              "format": {
                "decimalPlaces": 1,
                "unit": "percent-decimal"
              },
              "thresholds": {
                "steps": [
                  {
                    "name": "Alert: Warning condition example",
                    "value": 0.5
                  },
                  {
                    "name": "Alert: Critical condition example",
                    "value": 0.75
                  }
                ]
              }
            }
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "query": "node_load15{instance=~'$instance',job='$job'}"
                  }
                }
              }
            }
          ]
        }
      },
      "gaugeEx": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "Gauge Ex",
            "description": "This is a gauge chart"
          },
          "plugin": {
            "kind": "GaugeChart",
            "spec": {
              "calculation": "last-number",
              "format": {
                "unit": "percent"
              },
              "thresholds": {
                "steps": [
                  {
                    "value": 85
                  },
                  {
                    "value": 95
                  }
                ]
              }
            }
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "query": "(((count(count(node_cpu_seconds_total{job='$job',instance=~'$instance'}) by (cpu))) - avg(sum by (mode)(rate(node_cpu_seconds_total{mode=\"idle\",job='$job',instance=~'$instance'}[$interval])))) * 100) / count(count(node_cpu_seconds_total{job='$job',instance=~'$instance'}) by (cpu))"
                  }
                }
              }
            }
          ]
        }
      },
      "gaugeFormatTest": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "Gauge Format Test"
          },
          "plugin": {
            "kind": "GaugeChart",
            "spec": {
              "calculation": "last-number",
              "format": {
                "unit": "bytes"
              },
              "max": 95000000,
              "thresholds": {
                "steps": [
                  {
                    "value": 71000000
                  },
                  {
                    "value": 82000000
                  }
                ]
              }
            }
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "query": "node_time_seconds{job='$job',instance=~'$instance'} - node_boot_time_seconds{job='$job',instance=~'$instance'}"
                  }
                }
              }
            }
          ]
        }
      },
      "gaugeRAM": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "RAM Used",
            "description": "This is a stat chart"
          },
          "plugin": {
            "kind": "GaugeChart",
            "spec": {
              "calculation": "last-number",
              "format": {
                "unit": "percent"
              },
              "thresholds": {
                "steps": [
                  {
                    "value": 85
                  },
                  {
                    "value": 95
                  }
                ]
              }
            }
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "query": "100 - ((node_memory_MemAvailable_bytes{job='$job',instance=~'$instance'} * 100) / node_memory_MemTotal_bytes{job='$job',instance=~'$instance'})"
                  }
                }
              }
            }
          ]
        }
      },
      "legendEx": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "Legend Example"
          },
          "plugin": {
            "kind": "TimeSeriesChart",
            "spec": {
              "legend": {
                "position": "bottom"
              },
              "yAxis": {
                "format": {
                  "shortValues": true,
                  "unit": "bytes"
                },
                "show": true
              }
            }
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "query": "node_memory_MemTotal_bytes{job='$job',instance=~'$instance'} - node_memory_MemFree_bytes{job='$job',instance=~'$instance'} - node_memory_Buffers_bytes{job='$job',instance=~'$instance'} - node_memory_Cached_bytes{job='$job',instance=~'$instance'}",
                    "seriesNameFormat": "Node memory total"
                  }
                }
              }
            },
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "query": "node_memory_Buffers_bytes{job='$job',instance=~'$instance'}",
                    "seriesNameFormat": "Memory (buffers) - {{instance}}"
                  }
                }
              }
            },
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "query": "node_memory_Cached_bytes{job='$job',instance=~'$instance'}",
                    "seriesNameFormat": "Cached Bytes"
                  }
                }
              }
            },
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "query": "node_memory_MemFree_bytes{job='$job',instance=~'$instance'}",
                    "seriesNameFormat": "MemFree Bytes"
                  }
                }
              }
            }
          ]
        }
      },
      "seriesTest": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "~130 Series",
            "description": "This is a line chart"
          },
          "plugin": {
            "kind": "TimeSeriesChart",
            "spec": {
              "yAxis": {
                "format": {
                  "shortValues": true,
                  "unit": "bytes"
                }
              }
            }
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "query": "rate(caddy_http_response_duration_seconds_sum[$interval])"
                  }
                }
              }
            }
          ]
        }
      },
      "statLg": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "Stat Lg",
            "description": "This is a stat chart"
          },
          "plugin": {
            "kind": "StatChart",
            "spec": {
              "calculation": "mean",
              "format": {
                "unit": "percent"
              }
            }
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "query": "(((count(count(node_cpu_seconds_total{job='$job',instance=~'$instance'}) by (cpu))) - avg(sum by (mode)(rate(node_cpu_seconds_total{mode=\"idle\",job='$job',instance=~'$instance'}[$interval])))) * 100) / count(count(node_cpu_seconds_total{job='$job',instance=~'$instance'}) by (cpu))"
                  }
                }
              }
            }
          ]
        }
      },
      "statMd": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "Stat Md"
          },
          "plugin": {
            "kind": "StatChart",
            "spec": {
              "calculation": "sum",
              "format": {
                "decimalPlaces": 2,
                "shortValues": true,
                "unit": "decimal"
              },
              "sparkline": {
                "color": "#e65013",
                "width": 1.5
              }
            }
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "query": "avg(node_load15{job='node',instance=~'$instance'}) /  count(count(node_cpu_seconds_total{job='node',instance=~'$instance'}) by (cpu)) * 100"
                  }
                }
              }
            }
          ]
        }
      },
      "statRAM": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "RAM Used",
            "description": "This is a stat chart"
          },
          "plugin": {
            "kind": "StatChart",
            "spec": {
              "calculation": "last-number",
              "format": {
                "unit": "percent"
              }
            }
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "query": "100 - ((node_memory_MemAvailable_bytes{job='$job',instance=~'$instance'} * 100) / node_memory_MemTotal_bytes{job='$job',instance=~'$instance'})"
                  }
                }
              }
            }
          ]
        }
      },
      "statSm": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "Stat Sm"
          },
          "plugin": {
            "kind": "StatChart",
            "spec": {
              "calculation": "mean",
              "format": {
                "decimalPlaces": 1,
                "shortValues": true,
                "unit": "decimal"
              }
            }
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "query": "node_time_seconds{job='$job',instance=~'$instance'} - node_boot_time_seconds{job='$job',instance=~'$instance'}"
                  }
                }
              }
            }
          ]
        }
      },
      "statTotalRAM": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "RAM Total",
            "description": "This is a stat chart"
          },
          "plugin": {
            "kind": "StatChart",
            "spec": {
              "calculation": "last-number",
              "format": {
                "decimalPlaces": 1,
                "unit": "bytes"
              }
            }
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "query": "node_memory_MemTotal_bytes{job='$job',instance=~'$instance'}"
                  }
                }
              }
            }
          ]
        }
      },
      "testNodeQuery": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "Test Query",
            "description": "Description text"
          },
          "plugin": {
            "kind": "TimeSeriesChart",
            "spec": {
              "legend": {
                "position": "right"
              },
              "yAxis": {
                "format": {
                  "decimalPlaces": 2,
                  "unit": "decimal"
                }
              }
            }
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "query": "node_load15{instance=~\"(demo.do.prometheus.io:9100)\",job='$job'}",
                    "seriesNameFormat": "Test {{job}} {{instance}}"
                  }
                }
              }
            }
          ]
        }
      },
      "testQueryAlt": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "Test Query Alt",
            "description": "Description text"
          },
          "plugin": {
            "kind": "TimeSeriesChart",
            "spec": {
              "legend": {
                "position": "right"
              },
              "thresholds": {
                "steps": [
                  {
                    "name": "Alert: Warning condition example",
                    "value": 0.4
                  },
                  {
                    "name": "Alert: Critical condition example",
                    "value": 0.75
                  }
                ]
              },
              "yAxis": {
                "format": {
                  "decimalPlaces": 1,
                  "unit": "percent-decimal"
                }
              }
            }
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "query": "node_load1{instance=~\"(demo.do.prometheus.io:9100)\",job='$job'}"
                  }
                }
              }
            }
          ]
        }
      },
      "test": {
        "kind": "Panel",
        "spec": {
          "display": {
            "name": "status ${job}"
          },
          "plugin": {
            "kind": "StatChart",
            "spec": {
              "calculation": "last-number",
              "format": {
                "unit": "decimal"
              },
              "sparkline": {}
            }
          },
          "queries": [
            {
              "kind": "TimeSeriesQuery",
              "spec": {
                "plugin": {
                  "kind": "PrometheusTimeSeriesQuery",
                  "spec": {
                    "query": "up{job=\"$job\"}",
                    "datasource": "$dynamicVariable"
                  }
                }
              }
            }
          ]
        }
      }
    },
    "layouts": [
      {
        "kind": "Grid",
        "spec": {
          "display": {
            "title": "Row 1",
            "collapse": {
              "open": true
            }
          },
          "items": [
            {
              "x": 0,
              "y": 0,
              "width": 2,
              "height": 3,
              "content": {
                "$ref": "#/spec/panels/statRAM"
              }
            },
            {
              "x": 0,
              "y": 3,
              "width": 2,
              "height": 3,
              "content": {
                "$ref": "#/spec/panels/statTotalRAM"
              }
            },
            {
              "x": 2,
              "y": 0,
              "width": 4,
              "height": 6,
              "content": {
                "$ref": "#/spec/panels/statMd"
              }
            },
            {
              "x": 6,
              "y": 0,
              "width": 10,
              "height": 6,
              "content": {
                "$ref": "#/spec/panels/statLg"
              }
            },
            {
              "x": 16,
              "y": 0,
              "width": 4,
              "height": 6,
              "content": {
                "$ref": "#/spec/panels/gaugeFormatTest"
              }
            },
            {
              "x": 20,
              "y": 0,
              "width": 4,
              "height": 6,
              "content": {
                "$ref": "#/spec/panels/gaugeRAM"
              }
            },
            {
              "x": 0,
              "y": 6,
              "width": 7,
              "height": 5,
              "content": {
                "$ref": "#/spec/panels/test"
              }
            }
          ]
        }
      },
      {
        "kind": "Grid",
        "spec": {
          "display": {
            "title": "Row 2",
            "collapse": {
              "open": true
            }
          },
          "items": [
            {
              "x": 0,
              "y": 0,
              "width": 12,
              "height": 6,
              "content": {
                "$ref": "#/spec/panels/legendEx"
              }
            },
            {
              "x": 12,
              "y": 0,
              "width": 12,
              "height": 6,
              "content": {
                "$ref": "#/spec/panels/basicEx"
              }
            }
          ]
        }
      },
      {
        "kind": "Grid",
        "spec": {
          "display": {
            "title": "Row 3",
            "collapse": {
              "open": false
            }
          },
          "items": [
            {
              "x": 0,
              "y": 0,
              "width": 24,
              "height": 6,
              "content": {
                "$ref": "#/spec/panels/cpuGauge"
              }
            },
            {
              "x": 0,
              "y": 6,
              "width": 12,
              "height": 8,
              "content": {
                "$ref": "#/spec/panels/cpuLine"
              }
            },
            {
              "x": 12,
              "y": 0,
              "width": 12,
              "height": 8,
              "content": {
                "$ref": "#/spec/panels/defaultTimeSeriesChart"
              }
            }
          ]
        }
      }
    ],
    "variables": [
      {
        "kind": "ListVariable",
        "spec": {
          "allowAllValue": false,
          "allowMultiple": false,
          "plugin": {
            "kind": "PrometheusLabelValuesVariable",
            "spec": {
              "labelName": "job"
            }
          },
          "name": "job",
          "defaultValue": "alertmanager"
        }
      },
      {
        "kind": "ListVariable",
        "spec": {
          "allowAllValue": false,
          "allowMultiple": false,
          "plugin": {
            "kind": "PrometheusLabelValuesVariable",
            "spec": {
              "labelName": "instance",
              "matchers": ["up{job=~\"$job\"}"]
            }
          },
          "name": "instance",
          "defaultValue": "demo.prometheus.io:9093"
        }
      },
      {
        "kind": "ListVariable",
        "spec": {
          "allowAllValue": false,
          "allowMultiple": false,
          "plugin": {
            "kind": "StaticListVariable",
            "spec": {
              "values": ["1m", "5m"]
            }
          },
          "name": "interval",
          "defaultValue": "1m"
        }
      },
      {
        "kind": "TextVariable",
        "spec": {
          "value": "test",
          "constant": true,
          "name": "text"
        }
      },
      {
        "kind": "ListVariable",
        "spec": {
          "name": "dynamicVariable",
          "allowAllValue": false,
          "allowMultiple": false,
          "plugin": {
            "kind": "DatasourceVariable",
            "spec": {
              "datasourcePluginKind": "PrometheusDatasource"
            }
          },
          "defaultValue": "Default (PrometheusLocal from dashboard)"
        }
      }
    ],
    "duration": "5m",
    "refreshInterval": "0s",
    "datasources": {
      "PrometheusLocal": {
        "default": false,
        "plugin": {
          "kind": "PrometheusDatasource",
          "spec": {
            "proxy": {
              "kind": "HTTPProxy",
              "spec": {
                "url": "http://localhost:9090"
              }
            }
          }
        }
      }
    }
  }
}
